DC2 Notebooks

This directory contains tutorial and demonstration notebooks convering how to access and use the DC2 datasets.
See the index table below for links to the notebook code, and an auto-rendered view of the notebook with outputs.
Notes on how to contribute more notebooks, and how the rendering is made, are at the bottom of the page.

.. list-table::
   :widths: 10 20 10 10
   :header-rows: 1

   * - Notebook
     - Short description
     - Links
     - Owner


   * - DC2 Coadd Run1.1p GCR access HSC selection
     - Use the GCR to apply the HSC object selection cuts
     - `ipynb <DC2%20Coadd%20Run1.1p%20GCR%20access%20--%20HSC%20selection.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Coadd_Run1.1p_GCR_access_--_HSC_selection.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_access_--_HSC_selection.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_access_--_HSC_selection.log

     - `Yao-Yuan Mao <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@yymao>`_


   * - DC2 Coadd Run1.1p Butler Access HSC selection
     - Use the Butler to apply the HSC object selection cuts
     - `ipynb <DC2_Coadd_Run1.1p_Butler_Access_HSC_selection.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Coadd_Run1.1p_Butler_Access_HSC_selection.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_Butler_Access_HSC_selection.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_Butler_Access_HSC_selection.log

     - `Jim Chiang <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@jchiang87>`_


   * - DC2 Coadd Run1.1p direct access, color-color stellar locus
     - Directly access the Run 1.1p coadd catalogs and explore the stellar locus
     - `ipynb <DC2%20Coadd%20Run1.1p%20direct%20access%20--%20color-color%20stellar%20locus.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Coadd_Run1.1p_direct_access_--_color-color_stellar_locus.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_direct_access_--_color-color_stellar_locus.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_direct_access_--_color-color_stellar_locus.log

     - `Michael Wood-Vasey <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@wmwv>`_


   * - DC2 Coadd Run1.1p GCR Tutorial Part I: GCR access
     - Use the GCR for simple access to the coadd catalogs
     - `ipynb <DC2%20Coadd%20Run1.1p%20GCR%20tutorial%20--%20Part%20I%3A%20GCR%20Access.ipynb>`_, `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_I:_GCR_Access.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_I:_GCR_Access.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_I:_GCR_Access.log

     - `Francois Lanusse <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@EiffL>`_, `Javier Sanchez <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@fjaviersanchez>`_


   * - DC2 Coadd Run1.1p GCR Tutorial Part II: Lensing Cuts
     - Use the GCR to build a lensing sample similar to the HSC Y1 shape catalog
     - `ipynb <DC2%20Coadd%20Run1.1p%20GCR%20tutorial%20--%20Part%20II%3A%20Lensing%20Cuts.ipynb>`_, `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_II:_Lensing_Cuts.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_II:_Lensing_Cuts.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Coadd_Run1.1p_GCR_tutorial_--_Part_II:_Lensing_Cuts.log

     - `Francois Lanusse <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@EiffL>`_, `Javier Sanchez <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@fjaviersanchez>`_

   * - DC2 Postage Stamps
     - Make some small cutout images and visualize them
     - `ipynb <DC2%20Postage%20Stamps.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/DC2_Postage_Stamps.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Postage_Stamps.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/DC2_Postage_Stamps.log

     - `Michael Wood-Vasey <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@wmwv>`_


   * - LSST Stack matching code
     - Spatial matching of objects using the DM Stack
     - `ipynb <LSST_Stack_matching_code.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/LSST_Stack_matching_code.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/LSST_Stack_matching_code.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/LSST_Stack_matching_code.log

     - `Jim Chiang <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@jchiang87>`_


   * - FoF Catalog Matching
     - Using the Friends of Friends algorithm to match two catalogs
     - `ipynb <FoFCatalogMatching%20Histogram.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/FoFCatalogMatching_Histogram.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/FoFCatalogMatching_Histogram.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/FoFCatalogMatching_Histogram.log

     - `Yao-Yuan Mao <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@yymao>`_


   * - PhoSim Instrumental Configuration
     - Inspecting a PhoSim segmentation file
     - `ipynb <PhoSim%20Instrumental%20Configuration.ipynb>`_,
       `rendered <https://nbviewer.jupyter.org/github/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/PhoSim_Instrumental_Configuration.nbconvert.ipynb>`_

       .. image:: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/PhoSim_Instrumental_Configuration.svg
          :target: https://github.com/LSSTDESC/DC2_Repo/blob/rendered/Notebooks/log/PhoSim_Instrumental_Configuration.log

     - `Chris Walter <https://github.com/LSSTDESC/DC2_Repo/issues/new?body=@cwwalter>`_


----

Notes for Contributors
----------------------
Both tutorial and demo notebooks are hugely useful resources - pull requests are most welcome!

* Before you commit a notebook, please make sure that a) it runs to completion and b) the outputs are cleared (to avoid both repo bloat and conflicts on every run due to semantically equivalent but bitwise-distinct output blobs).

* Please do update the index table above, carefully copying and adapting the URLs, and making sure that all the lines in the table are correctly aligned (or else the table will not display). *Pro-tip: use the "preview changes" tab in the online GitHub editor to check that the table is correct before committing.*

* The "owner" of a notebook (that's you, as contributor!) is responsible for accepting proposed modifications to it (by collaboration), and making sure that it does not go stale (by fixing issues posted about it).

* Every tutorial notebook needs an owner/last verified header, a statement of its goals (learning objectives) in the first markdown cell, and enough explanatory markdown (with links to docs, papers etc) to make the notebook make sense.

Continuous Integration
----------------------
All the notebooks in the folder can be run on Cori using the [`beavis-ci` script](beavis-ci.csh), which then pushes them to an orphan "rendered" branch so that the outputs can be viewed. At present, DC2_Repo admin permissions are needed to execute this push.

    If the link to a rendered notebook yields a 404 error, please check the corresponding log file and issue the notebook's owner.
